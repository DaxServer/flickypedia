{% set
    all_photos_available =
    photos.available
    and not photos.disallowed_licenses
    and not photos.duplicates %}

{% set
    all_photos_duplicates =
    photos.duplicates
    and not photos.available
    and not photos.disallowed_licenses %}

{% set
    all_photos_disallowed_licenses =
    photos.disallowed_licenses
    and not photos.duplicates
    and not photos.allowed %}

{% if photos.available %}
  <p class="message_available">
    <span class="highlight">
      {% if photos.available|length == 1 and all_photos_available %}
        This photo
      {% elif photos.available|length == 1 %}
        One of these photos
      {% elif photos.available|length == 2 and all_photos_available %}
        Both photos
      {% elif all_photos_available %}
        All {{ photos.available|length }} photos
      {% else %}
        {{ photos.available|length }} of these photos
      {% endif %}
      can be uploaded to Wikimedia Commons.
      Yay!
    </span>
  </p>
{% endif %}

{% if photos.duplicates %}
  <p class="message_duplicate">
    {% if photos.duplicates|length == 1 and all_photos_duplicates %}
      <span class="highlight">
        Your work is done!
      </span>
      This photo is
    {% elif photos.duplicates|length == 1 %}
      <span class="highlight">
        Some of your work is done!
      </span>
      One of these photos is
    {% elif photos.duplicates|length == 2 and all_photos_duplicates %}
      <span class="highlight">
        Your work is done!
      </span>
      Both photos are
    {% elif all_photos_duplicates %}
      <span class="highlight">
        Your work is done!
      </span>
      All {{ photos.duplicates|length }} photos are
    {% else %}
      <span class="highlight">
        Some of your work is done!
      </span>
      {{ photos.duplicates|length }} photos are
    {% endif %}
    already in Wikimedia Commons.
    W00t!
  </p>
  
  <p class="duplicate_link">
    <a href="{{ photos.duplicates|media_search_link }}">Have a look</a>?
  </p>
{% endif %}

{% if photos.disallowed %}
  <p class="message_disallowed">
    {% if photos.disallowed|length == 1 and all_photos_disallowed %}
      <span class="highlight">
        This photo can’t be used
      </span>
    {% elif photos.disallowed|length == 1 %}
      <span class="highlight">
        1 photo can’t be used
      </span>
    {% elif all_photos_disallowed %}
      <span class="highlight">
        None of these photos can be used
      </span>
    {% else %}
      <span class="highlight">
        {{ photos.disallowed|length }} can’t be used
      </span>
    {% endif %}
    because
    {% if photos.disallowed|length == 1 %}
      if
    {% else %}
      they
    {% endif %}
    uses

    {% for lic in photos.disallowed.values()|unique %}
      {{ lic.label }}
      {%- if loop.index <= loop.length - 2 %},{% endif %}
      {% if loop.index < loop.length - 1 %}and{% endif %}
    {% endfor %}
    license{% if photos.disallowed.values()|unique|length > 1 %}s{% endif %}.

    Sorry!
  </p>
  
  <p class="license_explanation">
    Wikimedia Commons only accepts CC0, CC BY, CC BY-SA, and Public Domain images.
  </p>
{% endif %}

